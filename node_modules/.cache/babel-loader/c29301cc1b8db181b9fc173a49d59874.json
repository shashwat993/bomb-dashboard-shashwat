{"ast":null,"code":"import { createReducer, nanoid } from '@reduxjs/toolkit';\nimport { addPopup, removePopup, toggleWalletModal, toggleSettingsMenu, updateBlockNumber } from './actions';\nconst initialState = {\n  blockNumber: {},\n  popupList: [],\n  walletModalOpen: false,\n  settingsMenuOpen: false\n};\nexport default createReducer(initialState, builder => builder.addCase(updateBlockNumber, (state, action) => {\n  const {\n    chainId,\n    blockNumber\n  } = action.payload;\n\n  if (typeof state.blockNumber[chainId] !== 'number') {\n    state.blockNumber[chainId] = blockNumber;\n  } else {\n    state.blockNumber[chainId] = Math.max(blockNumber, state.blockNumber[chainId]);\n  }\n}).addCase(toggleWalletModal, state => {\n  state.walletModalOpen = !state.walletModalOpen;\n}).addCase(toggleSettingsMenu, state => {\n  state.settingsMenuOpen = !state.settingsMenuOpen;\n}).addCase(addPopup, (state, _ref) => {\n  let {\n    payload: {\n      content,\n      key,\n      removeAfterMs = 15000\n    }\n  } = _ref;\n  state.popupList = (key ? state.popupList.filter(popup => popup.key !== key) : state.popupList).concat([{\n    key: key || nanoid(),\n    show: true,\n    content,\n    removeAfterMs\n  }]);\n}).addCase(removePopup, (state, _ref2) => {\n  let {\n    payload: {\n      key\n    }\n  } = _ref2;\n  state.popupList.forEach(p => {\n    if (p.key === key) {\n      p.show = false;\n    }\n  });\n}));","map":{"version":3,"sources":["/home/shashwat/Projects/Dyeus/src/state/application/reducer.ts"],"names":["createReducer","nanoid","addPopup","removePopup","toggleWalletModal","toggleSettingsMenu","updateBlockNumber","initialState","blockNumber","popupList","walletModalOpen","settingsMenuOpen","builder","addCase","state","action","chainId","payload","Math","max","content","key","removeAfterMs","filter","popup","concat","show","forEach","p"],"mappings":"AAAA,SAAQA,aAAR,EAAuBC,MAAvB,QAAoC,kBAApC;AACA,SAAQC,QAAR,EAAgCC,WAAhC,EAA6CC,iBAA7C,EAAgEC,kBAAhE,EAAoFC,iBAApF,QAA4G,WAA5G;AAgBA,MAAMC,YAA8B,GAAG;AACrCC,EAAAA,WAAW,EAAE,EADwB;AAErCC,EAAAA,SAAS,EAAE,EAF0B;AAGrCC,EAAAA,eAAe,EAAE,KAHoB;AAIrCC,EAAAA,gBAAgB,EAAE;AAJmB,CAAvC;AAOA,eAAeX,aAAa,CAACO,YAAD,EAAgBK,OAAD,IACzCA,OAAO,CACJC,OADH,CACWP,iBADX,EAC8B,CAACQ,KAAD,EAAQC,MAAR,KAAmB;AAC7C,QAAM;AAACC,IAAAA,OAAD;AAAUR,IAAAA;AAAV,MAAyBO,MAAM,CAACE,OAAtC;;AACA,MAAI,OAAOH,KAAK,CAACN,WAAN,CAAkBQ,OAAlB,CAAP,KAAsC,QAA1C,EAAoD;AAClDF,IAAAA,KAAK,CAACN,WAAN,CAAkBQ,OAAlB,IAA6BR,WAA7B;AACD,GAFD,MAEO;AACLM,IAAAA,KAAK,CAACN,WAAN,CAAkBQ,OAAlB,IAA6BE,IAAI,CAACC,GAAL,CAASX,WAAT,EAAsBM,KAAK,CAACN,WAAN,CAAkBQ,OAAlB,CAAtB,CAA7B;AACD;AACF,CARH,EASGH,OATH,CASWT,iBATX,EAS+BU,KAAD,IAAW;AACrCA,EAAAA,KAAK,CAACJ,eAAN,GAAwB,CAACI,KAAK,CAACJ,eAA/B;AACD,CAXH,EAYGG,OAZH,CAYWR,kBAZX,EAYgCS,KAAD,IAAW;AACtCA,EAAAA,KAAK,CAACH,gBAAN,GAAyB,CAACG,KAAK,CAACH,gBAAhC;AACD,CAdH,EAeGE,OAfH,CAeWX,QAfX,EAeqB,CAACY,KAAD,WAA6D;AAAA,MAArD;AAACG,IAAAA,OAAO,EAAE;AAACG,MAAAA,OAAD;AAAUC,MAAAA,GAAV;AAAeC,MAAAA,aAAa,GAAG;AAA/B;AAAV,GAAqD;AAC9ER,EAAAA,KAAK,CAACL,SAAN,GAAkB,CAACY,GAAG,GAAGP,KAAK,CAACL,SAAN,CAAgBc,MAAhB,CAAwBC,KAAD,IAAWA,KAAK,CAACH,GAAN,KAAcA,GAAhD,CAAH,GAA0DP,KAAK,CAACL,SAApE,EAA+EgB,MAA/E,CAAsF,CACtG;AACEJ,IAAAA,GAAG,EAAEA,GAAG,IAAIpB,MAAM,EADpB;AAEEyB,IAAAA,IAAI,EAAE,IAFR;AAGEN,IAAAA,OAHF;AAIEE,IAAAA;AAJF,GADsG,CAAtF,CAAlB;AAQD,CAxBH,EAyBGT,OAzBH,CAyBWV,WAzBX,EAyBwB,CAACW,KAAD,YAA6B;AAAA,MAArB;AAACG,IAAAA,OAAO,EAAE;AAACI,MAAAA;AAAD;AAAV,GAAqB;AACjDP,EAAAA,KAAK,CAACL,SAAN,CAAgBkB,OAAhB,CAAyBC,CAAD,IAAO;AAC7B,QAAIA,CAAC,CAACP,GAAF,KAAUA,GAAd,EAAmB;AACjBO,MAAAA,CAAC,CAACF,IAAF,GAAS,KAAT;AACD;AACF,GAJD;AAKD,CA/BH,CAD0B,CAA5B","sourcesContent":["import {createReducer, nanoid} from '@reduxjs/toolkit';\nimport {addPopup, PopupContent, removePopup, toggleWalletModal, toggleSettingsMenu, updateBlockNumber} from './actions';\n\ntype PopupList = Array<{\n  key: string;\n  show: boolean;\n  content: PopupContent;\n  removeAfterMs: number | null;\n}>;\n\nexport interface ApplicationState {\n  blockNumber: {[chainId: number]: number};\n  popupList: PopupList;\n  walletModalOpen: boolean;\n  settingsMenuOpen: boolean;\n}\n\nconst initialState: ApplicationState = {\n  blockNumber: {},\n  popupList: [],\n  walletModalOpen: false,\n  settingsMenuOpen: false,\n};\n\nexport default createReducer(initialState, (builder) =>\n  builder\n    .addCase(updateBlockNumber, (state, action) => {\n      const {chainId, blockNumber} = action.payload;\n      if (typeof state.blockNumber[chainId] !== 'number') {\n        state.blockNumber[chainId] = blockNumber;\n      } else {\n        state.blockNumber[chainId] = Math.max(blockNumber, state.blockNumber[chainId]);\n      }\n    })\n    .addCase(toggleWalletModal, (state) => {\n      state.walletModalOpen = !state.walletModalOpen;\n    })\n    .addCase(toggleSettingsMenu, (state) => {\n      state.settingsMenuOpen = !state.settingsMenuOpen;\n    })\n    .addCase(addPopup, (state, {payload: {content, key, removeAfterMs = 15000}}) => {\n      state.popupList = (key ? state.popupList.filter((popup) => popup.key !== key) : state.popupList).concat([\n        {\n          key: key || nanoid(),\n          show: true,\n          content,\n          removeAfterMs,\n        },\n      ]);\n    })\n    .addCase(removePopup, (state, {payload: {key}}) => {\n      state.popupList.forEach((p) => {\n        if (p.key === key) {\n          p.show = false;\n        }\n      });\n    }),\n);\n"]},"metadata":{},"sourceType":"module"}